!function(){"use strict";function A(A,e){var t=A.naturalWidth||A.videoWidth||A.width;if(e>=t)return A;var n=document.createElement("canvas");n.width=e,n.height=e/2;var i=n.getContext("2d");return i.drawImage(A,0,0,n.width,n.height),n}function e(e,t){function n(){e.width=e.clientWidth*C,e.height=e.clientHeight*C}function i(){var A={preserveDrawingBuffer:!1,antialias:!1};E=e.getContext("webgl",A)||e.getContext("experimental-webgl",A),E.enable(E.CULL_FACE),E.cullFace(E.BACK),T=E.getParameter(E.MAX_TEXTURE_SIZE)}function a(){function A(A,e){var t=E.createShader(A);E.shaderSource(t,e),E.compileShader(t),E.attachShader(b,t)}var e="attribute vec3 aVertexPosition;\nattribute vec2 aTexCoord;\nuniform mat4 matrix;\nvarying vec2 vTexCoord;\n\nvoid main(void)\n{\ngl_Position = matrix * vec4(aVertexPosition, 1.0);\nvTexCoord = aTexCoord;\n}",t="precision mediump float;\nuniform sampler2D uImage;\nvarying vec2 vTexCoord;\n\nvoid main(void)\n{\ngl_FragColor = texture2D(uImage, vTexCoord);\n}";b=E.createProgram(),A(E.VERTEX_SHADER,e),A(E.FRAGMENT_SHADER,t),E.linkProgram(b),E.useProgram(b),b.aVertexPosition=E.getAttribLocation(b,"aVertexPosition"),b.aTexCoord=E.getAttribLocation(b,"aTexCoord"),b.matrix=E.getUniformLocation(b,"matrix")}function o(){var A,e,t=40,n=40,i=[],a=[],o=[];for(A=0;t>=A;A++)for(e=0;n>=e;e++){var r=A*Math.PI/t,c=2*e*Math.PI/n,l=Math.cos(c)*Math.sin(r),u=Math.cos(r),s=Math.sin(c)*Math.sin(r);i.push(l,u,s);var d=e/n,p=A/t;a.push(d,p)}for(A=0;t>A;A++)for(e=0;n>e;e++){var f=A*(n+1)+e,h=f+n+1;o.push(f,h,f+1,h,h+1,f+1)}var g=E.createBuffer();E.bindBuffer(E.ARRAY_BUFFER,g),E.bufferData(E.ARRAY_BUFFER,new Float32Array(i),E.STATIC_DRAW),E.enableVertexAttribArray(b.aVertexPosition),E.vertexAttribPointer(b.aVertexPosition,3,E.FLOAT,!1,0,0);var v=E.createBuffer();E.bindBuffer(E.ARRAY_BUFFER,v),E.bufferData(E.ARRAY_BUFFER,new Float32Array(a),E.STATIC_DRAW),E.enableVertexAttribArray(b.aTexCoord),E.vertexAttribPointer(b.aTexCoord,2,E.FLOAT,!1,0,0);var m=E.createBuffer();E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,m),E.bufferData(E.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),E.STATIC_DRAW),B=o.length}function r(){var A=E.createTexture();E.bindTexture(E.TEXTURE_2D,A),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,0,255])),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR)}function c(A,t){function n(){var A=D?e.clientWidth/2:e.clientWidth,t=A/e.clientHeight;m.perspective(R,I,t,.1,1+y)}function i(){var A=v.create();v.rotateX(A,A,Math.PI/2-P.pitch),v.rotateY(A,A,P.orientation),v.rotateZ(A,A,P.gamma),v.rotateX(A,A,-P.beta);var e=P.initialAlpha-P.alpha;e+=P.yaw-P.initialOrientation-Math.PI/2,v.rotateY(A,A,e);var t=h.fromValues(0,0,-1*y);m.fromRotationTranslation(S,A,t)}A&&n(),t&&i(),m.multiply(G,R,S),E.uniformMatrix4fv(b.matrix,!1,G)}function l(){if(D){var A=e.width/2;E.viewport(0,0,A,e.height),E.drawElements(E.TRIANGLES,B,E.UNSIGNED_SHORT,0),E.viewport(A,0,A,e.height),E.drawElements(E.TRIANGLES,B,E.UNSIGNED_SHORT,0)}else E.viewport(0,0,e.width,e.height),E.drawElements(E.TRIANGLES,B,E.UNSIGNED_SHORT,0)}function u(){function A(A){var e=A.originalEvent.touches;return e&&e.length>0&&(A=e[0]),[A.pageX,A.pageY]}var t=!1;$(e).on("touchstart mousedown",function(n){if(!t){t=!0;var i=Math.max(e.clientWidth,e.clientHeight),a=2*Math.PI/i,o=A(n);$(document).on("touchend.engine mouseup.engine",function(A){t=!1,$(document).off(".engine")}),$(document).on("touchmove.engine mousemove.engine",function(e){var t=A(e),n=t[0]-o[0],i=-(t[1]-o[1]);o=t,P.yaw-=n*a,P.pitch-=i*a,"mousemove"==e.type&&(P.pitch>Math.PI/2?P.pitch=Math.PI/2:P.pitch<-Math.PI/2&&(P.pitch=-Math.PI/2)),f(F),x=!1})}})}function s(){var A=Math.PI/180;$(window).on("deviceorientation",function(e){e=e.originalEvent,P.alpha=e.alpha*A,P.beta=e.beta*A,P.gamma=e.gamma*A,f(F),x=!1}),$(window).on("orientationchange",function(){P.pitch=0,P.orientation=(window.orientation||0)*A,f(F)}),P.initialOrientation=(window.orientation||0)*A,P.orientation=P.initialOrientation}function d(){function A(){if(x){var n=Date.now(),i=n-t;i>1e3/60&&(t=n,P.yaw+=i/1e3/e*2*Math.PI,f(F)),Q(A)}}var e=120,t=Date.now();Q(A)}function p(){return 0===N?void(H=!1):(N&(M|F)&&(c(N&M,N&F),t.callback(P.yaw,P.pitch)),l(),N=0,void Q(p))}function f(A){N|=A,H||p()}var w={callback:$.noop,autoRotate:!1,enableTouch:!0,enableGyroscope:!0};t=$.extend({},w,t);var E,b,B,T,Q=window.requestAnimationFrame||function(A){setTimeout(A,20)},C=window.devicePixelRatio||1,y=1,I=Math.PI/4,D=!1,R=m.create(),S=m.create(),G=m.create(),P={yaw:0,pitch:0,alpha:0,beta:Math.PI/2,gamma:0,orientation:0,initialOrientation:0,initialAlpha:0},x=t.autoRotate||!1,k=1,M=2,F=4;n(),i(),a(),o(),r(),t.enableTouch&&u(),t.enableGyroscope&&s(),d();var N=0,H=!1;f(M|F),this.resize=function(){n(),f(M)},this.setSplitScreen=function(A){D=A,f(M)},this.setArchitectural=function(A){A?(y=0,I=Math.PI/2):(y=1,I=Math.PI/4),f(M|F)},this.reset=function(){P.yaw=0,P.pitch=0,P.initialAlpha=P.alpha,P.initialOrientation=P.orientation,f(F)},this.update=function(e){var t=A(e,T);E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,t),f(k)},this.setDirection=function(A,e){P.yaw=A,P.pitch=e,f(F)},this.getDirection=function(){return[P.yaw,P.pitch]},this.project=function(A){A=g.fromValues(A[0],A[1],A[2],1),g.transformMat4(A,A,G);var e=A[3]>.1,t=e?A[0]/A[3]:-10,n=e?A[1]/A[3]:0;return t=(t+1)/2,n=(-n+1)/2,[t,n]},this.unproject=function(A,e){A=2*A-1,e=1-2*e;var t=m.create();m.invert(t,G);var n=h.fromValues(A,e,1);h.transformMat4(n,n,t);var i=h.fromValues(A,e,0);h.transformMat4(i,i,t),h.subtract(i,i,n);var a=h.squaredLength(i),o=2*h.dot(i,n),r=h.squaredLength(n)-1,c=o*o-4*a*r,l=(-o-Math.sqrt(c))/(2*a);return h.scaleAndAdd(n,n,i,l),n}}function t(){function A(A,e,t){A.src=e,A.load(),$(A).one("canplay",function(){var e=!0;t&&u&&(e=!1),e&&A.play()})}function e(A){setTimeout(function(){A.src="",$(A).off()},0)}function t(){E.device.mobile?a.pause():a.volume=.1}function n(){E.device.mobile?u||a.play():a.volume=1}var i,a=$("<audio>")[0],o=$("<audio>")[0],r=$("<video playsinline>")[0],c={},l=!1,u=!1;Object.defineProperty(this,"muted",{get:function(){return u},set:function(A){u=A,u?a.pause():a.play()}}),this.load=function(){a.load(),o.load(),r.load(),l=!0,i&&this.playPrimaryAudio(i)};var s=$("<div>");this.on=s.on.bind(s),this.off=s.off.bind(s),this.emit=s.triggerHandler.bind(s),this.playPrimaryAudio=function(e){return l?(A(a,e,!0),void this.emit("play")):void(i=e)},this.stopPrimaryAudio=function(){e(a),this.emit("stop")},this.playSecondaryAudio=function(e){t(),A(o,e)},this.stopSecondaryAudio=function(){n(),e(o)},this.playVideo=function(A,e){t(),r.src=A,r.load(),$(r).one("canplaythrough",function(){function A(){e.each(function(){this.width!=this.clientWidth&&(this.width=this.clientWidth),this.height!=this.clientHeight&&(this.height=this.clientHeight);var A=this.getContext("2d"),e=[r.videoWidth,r.videoHeight,this.width,this.height,!0];e=E.getDrawImageParams.apply(null,e),e.unshift(r),A.drawImage.apply(A,e)})}r.play(),function t(){r.currentSrc&&(A(),setTimeout(t,40))}()})},this.stopVideo=function(){n(),e(r)},this.loadImage=function(A,e){var t=c[A];return t?$.Deferred().resolve(t):E.loadImage(A,e).done(function(e){c[A]=e})},this.cleanImageCache=function(){c={}}}function n(A,n){function c(){var A=E.getQueryParams(location.search);return"1"===A.autoplay||"fb"===A.on}function l(A){rA.createGdprOverlay(Z,"Video"),oA=[];var e,t=A.id,n=!1;void 0!==A.gdpr&&null!==A.gdpr||(e=!0),e=A.gdpr,e&&(n=!0),A.tags.forEach(function(A){var e="";void 0!==A.link&&null!==A.link&&(e=rA.extractRootDomain(A.link)),rA.isExternalDomain(e)&&0!==e.length&&-1===oA.indexOf(e)&&A.isDirectEmbed&&oA.push(e)}),oA.sort(),oA.forEach(function(A,e){var t='<a href="https://www.'+A+'" target="_blank">'+A+"</a>";t+=e<oA.length-1?", ":". ",$(".contentLinks").append(t)});var i=!1,a=JSON.parse(window.localStorage.getItem("tl-"+t));if(a&&0!==a.length){for(var o=a.domains,r=0;r<o.length;r++)if(oA[r]!==o[r]){i=!0;break}i=rA.isExceededTime(a.timestamp)}else i=!0;0==oA.length&&(i=!1),n&&i&&($("#tlGdprOverlay").css({display:"block"}),$(".gdpr-btn-accept").data("id",t),$(".gdpr-btn-accept").data("domains",oA),$(".gdpr-btn-accept").bind("click",rA.acceptGDPR))}function u(){var A={callback:function(A,e){if(W){var t=W.find(".tlCompassNeedle");t.css("transform","rotateZ("+A+"rad)")}for(var n in aA)aA[n].transform()},enableTouch:!0,enableGyroscope:E.device.mobile&&E.isTopWindow,autoRotate:"1"===cA.autorotate},t=$("<canvas>").appendTo(Z);O=new e(t[0],A),$(window).resize(function(){O.resize(),setTimeout(O.resize.bind(O),200)})}function s(){$('<div class="tlViewport tlViewportLeft">').appendTo(Z),$('<div class="tlViewport tlViewportRight">').appendTo(Z),U=Z.find(".tlViewport"),W=$('<div class="tlCompass">').appendTo(U),W.append('<div class="tlCompassNeedle">'),W.tap(function(){O.reset()}),Y=$('<div class="tlControls">').appendTo(Z),L=$('<div class="tlOverlay">').appendTo(Z),V=$('<div class="tlFader in">').appendTo(Z),R(),X=$('<div class="tlSceneTitle">').appendTo(Z),F.sceneTitle=X,j=$('<div class="tlSceneLogo">').appendTo(Z),F.sceneLogo=j,"0"!==cA.displaytitle&&n.displayTitle||F.sceneTitle.detach(),B(!1),$(window).on("orientationchange",m)}function d(){var A=$('<div class="tlControlPanel">').appendTo(Y),e=$('<div class="tlMuteButton hoverable">').appendTo(A),t=$('<div class="tlShareButton hoverable">').appendTo(A),i=$('<div class="tlFullScreenButton hoverable">').appendTo(A),a=$('<div class="tlSplitScreenButton hoverable">').appendTo(A);e.hide(),n.displayShare||t.hide(),i.toggle(!E.device.mobile),a.toggle(E.device.mobile&&!E.device.tablet),n.displayPanel||(t.hide(),i.hide(),a.hide()),e.tap(function(){_.muted=!_.muted,e.toggleClass("muted",_.muted)}),t.tap(function(){o(Z,z.pageUrl,z.embedUrl)}),i.tap(function(){Z.toggleFullscreen()}),a.tap(function(){return E.isTopWindow?(B(!0),void Z.toggleFullscreen(!0)):void window.open(window.location.href,"_blank")}),L.touch(function(){B(!1),Z.toggleFullscreen(!1)})}function p(){Z.on("tagmove",function(A,e,t){var n=F.getTag(e);n.point={x:t[0],y:t[1]},F.setTag(e,n)}),$(window).on("message",function(A){"openShare"==A.originalEvent.data&&o(Z,z.pageUrl,z.embedUrl)})}function h(){_=new t;var A=!n.autoplay;E.device.mobile&&!E.device.app&&(A=!0),H=A?g():!0,Z.addClass("tlPlayButtonActive"),$.when(H).done(function(){_.load(),Z.removeClass("tlPlayButtonActive")}),_.on("play stop",function(A){Y.find(".tlMuteButton").toggle("play"==A.type)})}function g(){var A=$.Deferred(),e=$('<div class="tlPlayButton">').appendTo(Z);return e.touch(function(){e.remove(),A.resolve()}),A.promise()}function v(){F.on=Z.on.bind(Z),F.one=Z.one.bind(Z),F.off=Z.off.bind(Z),F.trigger=Z.triggerHandler.bind(Z),F.engine=O,F.media=_,E.defineGetter(F,"splitScreen",function(){return iA}),E.defineGetter(F,"editor",function(){return n.editor})}function m(){iA=!1,nA&&(iA=90==Math.abs(window.orientation||0)),Z.toggleClass("tlSplitScreen",iA),O.setSplitScreen(iA),iA?U.eq(1).insertAfter(U.eq(0)):U.eq(1).detach()}function B(A){void 0===A&&(A=!nA),nA=A,K&&(A?K.enable():K.disable()),L.toggle(nA),m()}function T(A){return $.getJSON(A).then(function(A){return A=A.results,E.device.mobile?A.url=f.getImageUrl(A.id,4096,10,"scaletowidth"):A.url=f.getImageUrl(A.id,16,16,"none"),l(A),A})}function Q(A){var e=A.url,t=_.loadImage(e,!0);return t.then(function(){return A})}function C(A){function e(){var e=A.tags.map(function(A){var e=A.icon;if(e){var t=$.Deferred();return E.loadImage(e).always(t.resolve),t.promise()}});return $.when.apply($,e)}var t=$.Deferred();return e().then(t.resolve),setTimeout(t.resolve,AA),t.then(function(){return A})}function y(A){var e=Q(A),t=C(A);return $.when(e,t).then(function(){return A})}function I(A){return A.tags.forEach(function(A){var e=A.picture;e&&E.loadImage(e)}),A}function D(A){if("0"!==cA.rel&&!(A.length<2)){var e=$('<div class="tlRelatedScenes">').appendTo(Z),t=$('<div class="tlRelatedScenesContainer">').appendTo(e),n=$('<div class="tlRelatedScenesToggle hoverable">').appendTo(e);n.tap(function(){e.toggleClass("hidden")}),A.forEach(function(A){var e=$('<div class="tlRelatedScene hoverable">').appendTo(t),n=f.getImageUrl(A.id,640,10,"scaledown");$('<div class="tlRelatedSceneImage">').css({backgroundImage:"url("+n+")"}).appendTo(e),$('<div class="tlRelatedSceneTitle">').text(A.title).appendTo(e);var i=f.getUrlById(A.id);e.tap(function(){F.load(i)})})}}function R(){tA=!1;var A=$.Deferred(),e=1==V.css("opacity");return setTimeout(A.resolve,e?0:eA),V.addClass("in"),A.promise().then(function(){clearTimeout(lA),lA=setTimeout(function(){V.addClass("loading")},eA)})}function S(){tA=!0,clearTimeout(lA),V.removeClass("loading"),V.removeClass("in")}function G(A){J.load(z,A);var e=[];z.tags.forEach(function(A){var t=A.id;aA[t]||(aA[t]=new r(F,U)),aA[t].load(A),e.push(t)});for(var t in aA)e.indexOf(t)<0&&(aA[t].remove(),delete aA[t]);q&&(q.remove(),q=void 0,Z.removeClass("tlPopupActive"))}function P(A){var e=$('<div class="tlErrorMessage">').appendTo(Z);e.text(w(A))}function x(A,e){z=A,F.metadata=z,G(e),F.trigger("loadscene",[A.id])}function k(A){var e=/^https?:\/\/thinglink.com\/(.*)/,t=e.exec(A);return t&&(A=A.replace(e,"https://www.thinglink.com/$1")),A}function M(A){var e=/\/(?:media|video)(?:card)?\/(\d+)$/,t=e.exec(A);return t?(A=A.replace(e,"/api/media/$1"),A=k(A),void F.load(A)):void window.open(A,"_blank")}var F=this,N={autoplay:c(),displayShare:!1,editor:!1,displayTitle:!0,displayPanel:!0};n.editor&&(void 0===n.autoplay&&(n.autoplay=!0),void 0===n.displayShare&&(n.displayShare=!0)),n=$.extend({},N,n);var H,Z,U,Y,W,L,V,X,j,O,_,z,J,q,K,AA=5e3,eA=1e3,tA=!1,nA=!1,iA=!1,aA={},oA=[],rA=b,cA=E.getQueryParams(location.search);E.device.ios&&(K=new NoSleep),function(){return Z=$('<div class="tlPlayer">').appendTo(A),Z.hoverable(),E.supports.webgl?(u(),s(),d(),p(),h(),v(),J=new a(F),void(E.device.mobile&&Z.on("touchstart",!1))):void P("not_supported")}(),function(){var A=E.getQueryParams(location.search),e=A.style;if(e&&/^[0-9a-f]{32}$/.test(e)){var t="https://s3.amazonaws.com/thinglink-customer/css/"+e+".css";$("<link>").attr({rel:"stylesheet",href:t}).appendTo("head")}}();var lA,uA=0;this.load=function(A){var e=0===uA,t=++uA,i=(rA.extractRootDomain(A),T(A+"?scopes=permissions").then(y).then(I));$.when(i,R()).done(function(A){t==uA&&(x(A,!0),S())}).fail(function(){P("load_failed")}),e&&!n.editor&&$.getJSON(A+"/transitions").done(function(A){D(A.results)})},this.reload=function(A){T(A).then(function(A){x(A)})},this.update=function(){G()},this.getTag=function(A){return aA[A]?aA[A].data:null},this.openTag=function(A){if(tA){F.trigger("opentag",[A]);var e=this.getTag(A);return!e.link||e.isDirectEmbed||F.editor?void(q||(q=new i(F,U),q.load(e),Z.addClass("tlPopupActive"))):(M(e.link),void F.trigger("closetag",[A]))}},this.closeTag=function(A){tA&&(F.trigger("closetag",[A]),q&&(q.remove(),q=void 0,Z.removeClass("tlPopupActive")))},this.setTag=function(A,e){if(!e){e={},e.id=A,e.videoid=z.id;var t=E.pointToProjection(O.unproject(.5,.5));e.point={x:t[0],y:t[1]}}aA[A]||(aA[A]=new r(F,U)),aA[A].load(e),q&&q.load(e)}}function i(A,e){function t(){var A=$("<div>").appendTo(v),e=f.getPictureUrl(u.image);A.css("background-image","url("+e+")")}function n(){var e=$("<canvas>").appendTo(v);A.media.playVideo(u.video,e)}function i(){var A=$('<div class="tlIframeWrapper">').appendTo(v);A.on("touchstart",function(A){A.stopPropagation()});var e=$("<iframe>").appendTo(A);e.attr("src",u.embed)}function a(){var A=$("<article>").appendTo(v);$("<a>").attr("href",u.link).attr("target","_blank").text(u.link).appendTo(A)}function o(){v.empty(),u.image?t():u.video?n():u.embed?i():u.link&&a()}function r(){if(m.empty(),u.description){var A=$('<div class="tlPopupOverlayText">').appendTo(m),e=E.markdownToHtml(u.description);A.html(e),A.on("touchstart",function(A){$(A.target).is("a")&&A.stopPropagation(),this.scrollHeight>this.clientHeight&&A.stopPropagation()})}}function c(){u.audio||u.video||u.embed?A.media.playSecondaryAudio(u.audio):A.media.stopSecondaryAudio()}function l(A){return{id:A.id,image:A.picture,audio:A.audio,video:A.video,description:A.description,embed:A.isDirectEmbed?A.link:null,link:A.isDirectEmbed?null:A.link}}var u,s,d,p,h,g,v,m;!function(){d=$('<div class="tlPopupContainer">').appendTo(e),h=$('<div class="tlPopupWrapper">').appendTo(d),p=$('<div class="tlPopup">').appendTo(h),v=$('<div class="tlPopupContent">').appendTo(p),m=$('<div class="tlPopupOverlay">').appendTo(p),g=$('<div class="tlPopupClose hoverable">').appendTo(h),g.tap(function(){A.closeTag(u.id)})}(),this.load=function(A){this.data=A,s=u,u=l(A);var e=E.propsChanged.bind(E,u,s);e(["image","video","embed","link"])&&o(),e(["description"])&&r(),e(["audio","video","embed"])&&c()},this.remove=function(){d.remove(),A.media.stopSecondaryAudio(),A.media.stopVideo()}}function a(A){function e(){E.device.mobile||A.engine.reset()}function t(){var e=c.title||"";e.indexOf("My Interactive 360 Image")>=0?e="":e.indexOf("My Interactive Image")>=0&&(e=""),A.sceneTitle.text(e)}function n(e){var t=c.metadata||{},n=t.architectural||!1;A.engine.setArchitectural(n);var i=t.yaw||0,a=t.pitch||0;e&&A.engine.setDirection(i,a)}function i(){var e=c.metadata||{},t=!0;c.whitelabel?t=!1:e.hidelogo===!0&&(t=!1),A.sceneLogo.toggle(t),A.sceneLogo.off().click(function(){window.open(f.getSceneUrl(c.id))})}function a(){A.media.loadImage(c.url,!0).then(function(e){A.engine.update(e)})}function o(){c.audio?A.media.playPrimaryAudio(c.audio):A.media.stopPrimaryAudio()}function r(A){return{id:A.id,title:A.title,url:A.url,audio:A.audio,whitelabel:A.whitelabel,metadata:A.metadata}}var c,l;this.load=function(A,u){l=c,c=r(A);var s=E.propsChanged.bind(E,c,l);s(["id"])&&e(),s(["title"])&&t(),s(["metadata"])&&n(u),s(["whitelabel","metadata"])&&i(),s(["url"])&&a(),s(["audio"])&&o()}}function o(A,e,t){function n(){var A=encodeURIComponent(e),t=$('<div class="tlShareSection tlShareSocialSection">').appendTo(l),n=[["facebook","https://www.facebook.com/sharer/sharer.php?u="],["twitter","https://twitter.com/intent/tweet?url="],["gplus","https://plus.google.com/share?url="],["vk","https://vk.com/share.php?url="]];n.forEach(function(e){var n=e[0],i=e[1],a=$('<div class="tlShareSocialButton">').addClass(n).appendTo(t);a.tap(function(){return window.open(i+A,"_blank","width=600,height=400"),!1})})}function i(){var A=$('<div class="tlShareSection">').appendTo(l);$('<input type="text">').val(e).appendTo(A)}function a(){function A(A){var n='<iframe src="{1}" width="640" height="400" frameborder="0" allowfullscreen mozallowfullscreen webkitallowfullscreen></iframe>',i=encodeURI(t);A&&(i+="?autoplay=1");var a=n.replace("{1}",i);e.find("textarea").val(a)}var e=$('<div class="tlShareSection">').appendTo(l);$('<textarea rows="5">').appendTo(e),$('<label><input type="checkbox"> Autoplay</label>').appendTo(e),e.find(":checkbox").change(function(){A($(this).is(":checked"))}),A(!1)}var o,r,c,l;!function(){A.find(".tlShareContainer").remove(),o=$('<div class="tlShareContainer">').appendTo(A),r=$('<div class="tlShare">').appendTo(o),c=$('<div class="tlShareHeader">').text("Share").appendTo(r),l=$('<div class="tlShareBody">').appendTo(r),n(),i(),a(),l.on("touchstart",function(A){$(A.target).is("input,textarea")&&A.stopPropagation()}),o.tap(function(){o.remove()}),r.on("click touchstart",function(A){A.stopPropagation()})}()}function r(A,e){function t(){var e=d.position(),t=e.left/d.parent().width(),n=e.top/d.parent().height(),i=E.pointToProjection(A.engine.unproject(t,n));A.trigger("tagmove",[l.id,i])}function n(){s=E.projectionToPoint.apply(null,l.point),a()}function i(){var A=f.getIconUrl(l.icon);l.nubbin&&"transparent"!==l.nubbin&&(A=f.getNubbinUrl(l.nubbin)),p.css("background-image",A?"url("+A+")":""),p.toggleClass("tlTagIconFollow",A?!1:!!l.follow),h.toggle(!!l.title).text(l.title)}function a(){function t(A,e){var t=d.hasClass("hover")?60:30,a=E.inCircle(A,e,n/2,i/2,t);(a?o:r)()}var n=e.width(),i=e.height(),a=A.engine.project(s),c=a[0]*n,l=a[1]*i;d.translate(c,l),A.splitScreen&&t(c,l)}function o(){v||(d.addClass("hover"),v=setTimeout(function(){A.openTag(l.id)},g))}function r(){v&&(d.removeClass("hover"),clearTimeout(v),v=void 0,A.closeTag(l.id))}function c(A){var e=A.link&&!A.isDirectEmbed;return{id:A.id,title:A.title,point:[A.point.x,A.point.y],icon:A.icon,nubbin:A.nubbin,follow:e}}var l,u,s,d,p,h,g=1e3;!function(){d=$('<div class="tlTag hoverable">').appendTo(e),p=$('<div class="tlTagIcon">').appendTo(d),h=$('<div class="tlTagTitle">').appendTo(d),d.tapdrag({tap:function(){A.openTag(l.id)},drag:t,enabled:A.editor})}();var v;this.transform=a,this.load=function(A){this.data=A,u=l,l=c(A);var e=E.propsChanged.bind(E,l,u);e(["point"])&&n(),e(["title","icon","follow","nubbin"])&&i(),e(["id"])&&(u&&d.removeClass("tag-"+u.id),d.addClass("tag-"+l.id))},this.remove=function(){d.remove()}}function c(A){var e;return e=A.indexOf("://")>-1?A.split("/")[2]:A.split("/")[0],e=e.split(":")[0],e=e.split("?")[0]}function l(A){var e=c(A),t=e.split("."),n=t.length;return n>2&&(e="www"===t[0]?t.slice(1,n).join("."):t.slice(0,n).join(".")),e}function u(A){var e=["thinglink.com","thinglink.me","","vr.thinglink.com","app.widgets.thinglink.com","widgets.thinglink.com","thinglink.local","sandbox.thinglink.com","guess.thinglink.com","video.thinglink.com","thingpic.com","tlsrv.net"];return-1===e.indexOf(A)}function s(A){var e=new Date(A),t=new Date,n=864e5,i=t.getTime()-e.getTime(),a=i/n;return Math.floor(a)>30}function d(A,e){var t="https://thinglink.com/terms",n=jQuery('<div id="tlGdprOverlay">').appendTo(A);n.append('<div class="text">');var i=n.find(".text"),a="<p>"+e+' contains embed content from <span class="contentLinks"></span>By choosing to play this <span>'+e+"</span> you accept that you will be subject to their respective Terms of Service.",o='<button class="gdpr-btn-accept">accept</button>',r='<p class="tlTerms"><a href="'+t+'" target="_blank">Terms of service</a></p>';i.append(a),i.append(o),i.append(r)}function p(){var A=jQuery(this).data("id"),e=jQuery(this).data("domains"),t={mediaId:A,domains:e,timestamp:new Date};window.localStorage.setItem("tl-"+A,JSON.stringify(t)),jQuery("#tlGdprOverlay").remove()}!function(A,e){window.NoSleep=e()}(this,function(){return function(A){function e(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return A[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var t={};return e.m=A,e.c=t,e.d=function(A,t,n){e.o(A,t)||Object.defineProperty(A,t,{configurable:!1,enumerable:!0,get:n})},e.n=function(A){var t=A&&A.__esModule?function(){return A["default"]}:function(){return A};return e.d(t,"a",t),t},e.o=function(A,e){return Object.prototype.hasOwnProperty.call(A,e)},e.p="",e(e.s=0)}([function(A,e,t){function n(A,e){if(!(A instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function A(A,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(A,n.key,n)}}return function(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),e}}(),a=t(1),o="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,r=function(){function A(){n(this,A),o?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",a),this.noSleepVideo.addEventListener("timeupdate",function(A){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return i(A,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),A}();A.exports=r},function(A,e,t){A.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQAD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"}])});var f=function(){function A(A,e){return"@"==A.charAt(0)?e:A}function e(A){return l+"/api/nubbin/"+A+"/plain"}function t(A){return c+"/api/media/"+A}function n(A){return c+"/media/"+A}function i(A,e,t,n){var i=A+"/"+e+"/"+t+"/"+n;return l+"/api/image/"+i}function a(A,e,t,n){if(!A)return A;if(A.indexOf("/api/image/")>=0)return A;var i=encodeURIComponent(btoa(A)),a=i+"/"+e+"/"+t+"/"+n;return l+"/api/image/"+a}function o(A){return a(A,180,180,"thumbnail")}function r(A){return a(A,1280,1280,"scaledown")}var c=A("https://www.thinglink.com","https://thinglink.local:8443/thinglink/"),l=A("","https://thinglink.local:8443/thinglink/");return{getNubbinUrl:e,getUrlById:t,getSceneUrl:n,getIconUrl:o,getPictureUrl:r,getImageUrl:i}}(),h={};h.fromValues=function(A,e,t){var n=new Float32Array(3);return n[0]=A,n[1]=e,n[2]=t,n},h.subtract=function(A,e,t){return A[0]=e[0]-t[0],A[1]=e[1]-t[1],A[2]=e[2]-t[2],A},h.dot=function(A,e){return A[0]*e[0]+A[1]*e[1]+A[2]*e[2]},h.squaredLength=function(A){var e=A[0],t=A[1],n=A[2];return e*e+t*t+n*n},h.scale=function(A,e,t){return A[0]=e[0]*t,A[1]=e[1]*t,A[2]=e[2]*t,A},h.scaleAndAdd=function(A,e,t,n){return A[0]=e[0]+t[0]*n,A[1]=e[1]+t[1]*n,A[2]=e[2]+t[2]*n,A},h.normalize=function(A,e){var t=e[0],n=e[1],i=e[2],a=t*t+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),
A[0]=e[0]*a,A[1]=e[1]*a,A[2]=e[2]*a),A},h.transformMat4=function(A,e,t){var n=e[0],i=e[1],a=e[2],o=t[3]*n+t[7]*i+t[11]*a+t[15];return o=o||1,A[0]=(t[0]*n+t[4]*i+t[8]*a+t[12])/o,A[1]=(t[1]*n+t[5]*i+t[9]*a+t[13])/o,A[2]=(t[2]*n+t[6]*i+t[10]*a+t[14])/o,A};var g={};g.fromValues=function(A,e,t,n){var i=new Float32Array(4);return i[0]=A,i[1]=e,i[2]=t,i[3]=n,i},g.transformMat4=function(A,e,t){var n=e[0],i=e[1],a=e[2],o=e[3];return A[0]=t[0]*n+t[4]*i+t[8]*a+t[12]*o,A[1]=t[1]*n+t[5]*i+t[9]*a+t[13]*o,A[2]=t[2]*n+t[6]*i+t[10]*a+t[14]*o,A[3]=t[3]*n+t[7]*i+t[11]*a+t[15]*o,A};var v={};v.create=function(){var A=new Float32Array(4);return A[0]=0,A[1]=0,A[2]=0,A[3]=1,A},v.rotateX=function(A,e,t){t*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],r=Math.sin(t),c=Math.cos(t);return A[0]=n*c+o*r,A[1]=i*c+a*r,A[2]=a*c-i*r,A[3]=o*c-n*r,A},v.rotateY=function(A,e,t){t*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],r=Math.sin(t),c=Math.cos(t);return A[0]=n*c-a*r,A[1]=i*c+o*r,A[2]=a*c+n*r,A[3]=o*c-i*r,A},v.rotateZ=function(A,e,t){t*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],r=Math.sin(t),c=Math.cos(t);return A[0]=n*c+i*r,A[1]=i*c-n*r,A[2]=a*c+o*r,A[3]=o*c-a*r,A};var m={};m.create=function(){var A=new Float32Array(16);return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A},m.fromRotationTranslation=function(A,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],r=n+n,c=i+i,l=a+a,u=n*r,s=n*c,d=n*l,p=i*c,f=i*l,h=a*l,g=o*r,v=o*c,m=o*l;return A[0]=1-(p+h),A[1]=s+m,A[2]=d-v,A[3]=0,A[4]=s-m,A[5]=1-(u+h),A[6]=f+g,A[7]=0,A[8]=d+v,A[9]=f-g,A[10]=1-(u+p),A[11]=0,A[12]=t[0],A[13]=t[1],A[14]=t[2],A[15]=1,A},m.invert=function(A,e){var t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],r=e[5],c=e[6],l=e[7],u=e[8],s=e[9],d=e[10],p=e[11],f=e[12],h=e[13],g=e[14],v=e[15],m=t*r-n*o,w=t*c-i*o,E=t*l-a*o,b=n*c-i*r,B=n*l-a*r,T=i*l-a*c,Q=u*h-s*f,C=u*g-d*f,y=u*v-p*f,I=s*g-d*h,D=s*v-p*h,R=d*v-p*g,S=m*R-w*D+E*I+b*y-B*C+T*Q;return S?(S=1/S,A[0]=(r*R-c*D+l*I)*S,A[1]=(i*D-n*R-a*I)*S,A[2]=(h*T-g*B+v*b)*S,A[3]=(d*B-s*T-p*b)*S,A[4]=(c*y-o*R-l*C)*S,A[5]=(t*R-i*y+a*C)*S,A[6]=(g*E-f*T-v*w)*S,A[7]=(u*T-d*E+p*w)*S,A[8]=(o*D-r*y+l*Q)*S,A[9]=(n*y-t*D-a*Q)*S,A[10]=(f*B-h*E+v*m)*S,A[11]=(s*E-u*B-p*m)*S,A[12]=(r*C-o*I-c*Q)*S,A[13]=(t*I-n*C+i*Q)*S,A[14]=(h*w-f*b-g*m)*S,A[15]=(u*b-s*w+d*m)*S,A):null},m.multiply=function(A,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],r=e[4],c=e[5],l=e[6],u=e[7],s=e[8],d=e[9],p=e[10],f=e[11],h=e[12],g=e[13],v=e[14],m=e[15],w=t[0],E=t[1],b=t[2],B=t[3];return A[0]=w*n+E*r+b*s+B*h,A[1]=w*i+E*c+b*d+B*g,A[2]=w*a+E*l+b*p+B*v,A[3]=w*o+E*u+b*f+B*m,w=t[4],E=t[5],b=t[6],B=t[7],A[4]=w*n+E*r+b*s+B*h,A[5]=w*i+E*c+b*d+B*g,A[6]=w*a+E*l+b*p+B*v,A[7]=w*o+E*u+b*f+B*m,w=t[8],E=t[9],b=t[10],B=t[11],A[8]=w*n+E*r+b*s+B*h,A[9]=w*i+E*c+b*d+B*g,A[10]=w*a+E*l+b*p+B*v,A[11]=w*o+E*u+b*f+B*m,w=t[12],E=t[13],b=t[14],B=t[15],A[12]=w*n+E*r+b*s+B*h,A[13]=w*i+E*c+b*d+B*g,A[14]=w*a+E*l+b*p+B*v,A[15]=w*o+E*u+b*f+B*m,A},m.perspective=function(A,e,t,n,i){var a=1/Math.tan(e/2),o=1/(n-i);return A[0]=a/t,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=a,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=(i+n)*o,A[11]=-1,A[12]=0,A[13]=0,A[14]=2*i*n*o,A[15]=0,A},window.Player=n,$.fn.translate=function(A,e){return this.css("transform","translate3d("+A.toFixed(2)+"px,"+e.toFixed(2)+"px,0)")},$.fn.hoverable=function(A,e){return A||(A=".hoverable"),e||(e="hover"),this.on("mouseenter mouseleave",A,function(A){$(this).toggleClass(e,"mouseenter"==A.type)}),this.on("touchstart",A,function(A){function t(){A.preventDefault(),n.removeClass(e),$(document).off("touchend touchcancel",t)}A.preventDefault();var n=$(this);n.addClass(e),$(document).on("touchend touchcancel",t)}),this},$.fn.draggable=function(A){return A||(A={}),A.callback=A.callback||$.noop,this.on("mousedown",function(e){var t=$(e.delegateTarget),n=t.parent().offset(),i=!1;$(document).one("mousemove.draggable",function(A){t.data("dragging",!0)}),$(document).on("mousemove.draggable",function(A){var e=A.pageX-n.left,a=A.pageY-n.top;t.translate(e,a),i=!0}),$(document).on("mouseup.draggable",function(e){$(document).off(".draggable"),setTimeout(function(){t.data("dragging",!1)},0),i&&A.callback()})}),this},$.fn.touch=function(A){return this.on("touchstart click",function(e){e.preventDefault(),A(e)}),this},$.fn.tap=function(A){return this.on("click",function(e){e.preventDefault(),A(e)}),this.on("touchstart",function(e){e.preventDefault();var t=e.delegateTarget;$(document).one("touchend",function(e){e.preventDefault();var n=e.originalEvent.changedTouches[0],i=document.elementFromPoint(n.pageX,n.pageY);$(i).closest(t).length&&A(e)})}),this},$.fn.tapdrag=function(A){if(A=$.extend({tap:$.noop,drag:$.noop,enabled:!1},A),!A.enabled)return this.tap(A.tap),this;var e=10;this.on("touchstart mousedown",function(t){t.preventDefault();var n=$(t.delegateTarget),i=t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t,a={left:i.pageX,top:i.pageY},o=n.parent().offset(),r=!1;$(document).on("touchmove.draggable mousemove.draggable",function(A){A.preventDefault();var t=A.originalEvent.changedTouches?A.originalEvent.changedTouches[0]:A,i={left:t.pageX,top:t.pageY},c=i.left-a.left,l=i.top-a.top;if(!r&&c*c+l*l>e*e&&(r=!0),r){var u=i.left-o.left,s=i.top-o.top;n.translate(u,s)}}),$(document).on("touchend.draggable mouseup.draggable",function(e){e.preventDefault(),$(document).off(".draggable"),r?A.drag():A.tap()})})},$.fn.toggleFullscreen=function(A){if(void 0===A){var e=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"],t=e.some(function(A){return document[A]});A=!t}if(A){var n=this[0];n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.webkitRequestFullScreen?n.webkitRequestFullScreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()};var w=function(){var A={not_supported:"360° media is not supported on this browser",load_failed:"Error loading media"};return function(e){return A[e]}}(),E={device:{ios:/iPod|iPhone|iPad/.test(navigator.userAgent),android:/Android/.test(navigator.userAgent),mobile:/iPod|iPhone|iPad|Android/.test(navigator.userAgent),tablet:Math.min(screen.width,screen.height)>=768,iphone:/iPod|iPhone/.test(navigator.userAgent),winphone:/Windows Phone|IEMobile/.test(navigator.userAgent),app:/ThingLink/.test(navigator.userAgent)},supports:{webgl:function(){var A=document.createElement("canvas"),e=A.getContext("webgl")||A.getContext("experimental-webgl");return!!e}()},isTopWindow:function(){try{return window.self===window.top}catch(A){return!1}}(),projectionToPoint:function(A,e){var t=2*A*Math.PI,n=(.5-e)*Math.PI;return[Math.cos(t)*Math.cos(n),Math.sin(n),Math.sin(t)*Math.cos(n)]},pointToProjection:function(A){var e=Math.atan2(A[2],A[0]),t=Math.asin(A[1]);return 0>e&&(e=2*Math.PI+e),[e/(2*Math.PI),.5-t/Math.PI]},inCircle:function(A,e,t,n,i){var a=A-t,o=e-n;return i*i>a*a+o*o},loadImage:function(A,e){var t=$.Deferred(),n=new Image;return n.onload=t.resolve.bind(t,n),n.onerror=t.reject.bind(t,n),n.crossOrigin=e?"anonymous":void 0,n.src=A,t.promise()},getDrawImageParams:function(A,e,t,n,i){var a=A/e,o=t/n,r=0,c=0,l=t,u=n,s=0,d=0,p=A,f=e;return i?a>o?(p=e*o,s=(A-p)/2):(f=A/o,d=(e-f)/2):a>o?(u=t/a,c=(n-u)/2):(l=n*a,r=(t-l)/2),[s,d,p,f,r,c,l,u]},preventIdle:function(){setInterval(function(){location.href=location.href,window.setTimeout(window.stop,0)},3e4)},defineGetter:function(A,e,t){Object.defineProperty(A,e,{get:t})},deepEqual:function(A,e){if(A===e)return!0;if(!(A instanceof Object&&e instanceof Object))return!1;var t=Object.keys(A).sort(),n=Object.keys(e).sort();if(t.length!=n.length)return!1;for(var i=0;i<t.length;i++){var a=t[i];if(a!==n[i])return!1;if(!E.deepEqual(A[a],e[a]))return!1}return!0},propsChanged:function(A,e,t){return e?t.some(function(t){return!E.deepEqual(A[t],e[t])}):!0},escapeHtml:function(A){var e=document.createElement("div");return e.textContent=A,e.innerHTML},markdownToHtml:function(A){A=E.escapeHtml(A);var e=/(\*{1,3})([^\*\n]+)\1/g;A=A.replace(e,function(A,e,t){return 1==e.length?"<em>"+t+"</em>":2==e.length?"<strong>"+t+"</strong>":"<em><strong>"+t+"</strong></em>"});var t=/\[([^\]]+)\]\(([^\)]+)\)/g;return A=A.replace(t,function(A,e,t){return'<a href="'+t+'" target="_blank">'+e+"</a>"})},getQueryParams:function(A){if(A=A.trim().substr(1),!A)return{};var e={};return A.split("&").forEach(function(A){var t=A.split("=");e[t[0]]=t[1]}),e}},b={extractHostname:c,extractRootDomain:l,isExternalDomain:u,isExceededTime:s,createGdprOverlay:d,acceptGDPR:p};window.tlRequire&&tlRequire.define("gdprUtils",[],function(){return{extractHostname:c,extractRootDomain:l,isExternalDomain:u,isExceededTime:s,createGdprOverlay:d,acceptGDPR:p}})}();