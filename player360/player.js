!function(){"use strict";function _(n,A){function e(){n.width=n.clientWidth*h,n.height=n.clientHeight*h}function t(){return 0===G?void(S=!1):(G&(y|I)&&(function(A,e){var t;A&&(t=(E?n.clientWidth/2:n.clientWidth)/n.clientHeight,M.perspective(b,f,t,.1,1+g)),e&&function(){var A=k.create();k.rotateX(A,A,Math.PI/2-Q.pitch),k.rotateY(A,A,Q.orientation),k.rotateZ(A,A,Q.gamma),k.rotateX(A,A,-Q.beta);var e=Q.initialAlpha-Q.alpha;e+=Q.yaw-Q.initialOrientation-Math.PI/2,k.rotateY(A,A,e);var t=P.fromValues(0,0,-1*g);M.fromRotationTranslation(B,A,t)}(),M.multiply(T,b,B),m.uniformMatrix4fv(v.matrix,!1,T)}(G&y,G&I),A.callback(Q.yaw,Q.pitch)),function(){if(E){var A=n.width/2;m.viewport(0,0,A,n.height),m.drawElements(m.TRIANGLES,w,m.UNSIGNED_SHORT,0),m.viewport(A,0,A,n.height),m.drawElements(m.TRIANGLES,w,m.UNSIGNED_SHORT,0)}else m.viewport(0,0,n.width,n.height),m.drawElements(m.TRIANGLES,w,m.UNSIGNED_SHORT,0)}(),G=0,void p(t))}function o(A){G|=A,S||t()}var a={callback:$.noop,autoRotate:!1,enableTouch:!0,enableGyroscope:!0};A=$.extend({},a,A);var m,v,w,i,r,c,l,s,u,d,p=window.requestAnimationFrame||function(A){setTimeout(A,20)},h=window.devicePixelRatio||1,g=1,f=Math.PI/4,E=!1,b=M.create(),B=M.create(),T=M.create(),Q={yaw:0,pitch:0,alpha:0,beta:Math.PI/2,gamma:0,orientation:0,initialOrientation:0,initialAlpha:0},C=A.autoRotate||!1,y=2,I=4;function D(A){var e=A.originalEvent.touches;return e&&0<e.length&&(A=e[0]),[A.pageX,A.pageY]}function R(A,e){var t=m.createShader(A);m.shaderSource(t,e),m.compileShader(t),m.attachShader(v,t)}e(),d={preserveDrawingBuffer:!1,antialias:!1},(m=n.getContext("webgl",d)||n.getContext("experimental-webgl",d)).enable(m.CULL_FACE),m.cullFace(m.BACK),i=m.getParameter(m.MAX_TEXTURE_SIZE),v=m.createProgram(),R(m.VERTEX_SHADER,"attribute vec3 aVertexPosition;\nattribute vec2 aTexCoord;\nuniform mat4 matrix;\nvarying vec2 vTexCoord;\n\nvoid main(void)\n{\ngl_Position = matrix * vec4(aVertexPosition, 1.0);\nvTexCoord = aTexCoord;\n}"),R(m.FRAGMENT_SHADER,"precision mediump float;\nuniform sampler2D uImage;\nvarying vec2 vTexCoord;\n\nvoid main(void)\n{\ngl_FragColor = texture2D(uImage, vTexCoord);\n}"),m.linkProgram(v),m.useProgram(v),v.aVertexPosition=m.getAttribLocation(v,"aVertexPosition"),v.aTexCoord=m.getAttribLocation(v,"aTexCoord"),v.matrix=m.getUniformLocation(v,"matrix"),function(){var A,e,t=[],n=[],a=[];for(A=0;A<=40;A++)for(e=0;e<=40;e++){var i=A*Math.PI/40,o=2*e*Math.PI/40,r=Math.cos(o)*Math.sin(i),c=Math.cos(i),l=Math.sin(o)*Math.sin(i);t.push(r,c,l);var s=e/40,u=A/40;n.push(s,u)}for(A=0;A<40;A++)for(e=0;e<40;e++){var d=41*A+e,p=d+40+1;a.push(d,p,d+1,p,p+1,d+1)}var h=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,h),m.bufferData(m.ARRAY_BUFFER,new Float32Array(t),m.STATIC_DRAW),m.enableVertexAttribArray(v.aVertexPosition),m.vertexAttribPointer(v.aVertexPosition,3,m.FLOAT,!1,0,0);var g=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,g),m.bufferData(m.ARRAY_BUFFER,new Float32Array(n),m.STATIC_DRAW),m.enableVertexAttribArray(v.aTexCoord),m.vertexAttribPointer(v.aTexCoord,2,m.FLOAT,!1,0,0);var f=m.createBuffer();m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,f),m.bufferData(m.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),m.STATIC_DRAW),w=a.length}(),u=m.createTexture(),m.bindTexture(m.TEXTURE_2D,u),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,1,1,0,m.RGBA,m.UNSIGNED_BYTE,new Uint8Array([0,0,0,255])),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),A.enableTouch&&(s=!1,$(n).on("touchstart mousedown",function(A){if(!s){s=!0;var e=Math.max(n.clientWidth,n.clientHeight),a=2*Math.PI/e,i=D(A);$(document).on("touchend.engine mouseup.engine",function(A){s=!1,$(document).off(".engine")}),$(document).on("touchmove.engine mousemove.engine",function(A){var e=D(A),t=e[0]-i[0],n=-(e[1]-i[1]);i=e,Q.yaw-=t*a,Q.pitch-=n*a,"mousemove"==A.type&&(Q.pitch>Math.PI/2?Q.pitch=Math.PI/2:Q.pitch<-Math.PI/2&&(Q.pitch=-Math.PI/2)),o(I),C=!1})}})),A.enableGyroscope&&(l=Math.PI/180,$(window).on("deviceorientation",function(A){A=A.originalEvent,Q.alpha=A.alpha*l,Q.beta=A.beta*l,Q.gamma=A.gamma*l,o(I),C=!1}),$(window).on("orientationchange",function(){Q.pitch=0,Q.orientation=(window.orientation||0)*l,o(I)}),Q.initialOrientation=(window.orientation||0)*l,Q.orientation=Q.initialOrientation),r=120,c=Date.now(),p(function A(){if(C){var e=Date.now(),t=e-c;1e3/60<t&&(c=e,Q.yaw+=t/1e3/r*2*Math.PI,o(I)),p(A)}});var G=0,S=!1;o(y|I),this.resize=function(){e(),o(y)},this.setSplitScreen=function(A){E=A,o(y)},this.setArchitectural=function(A){f=A?(g=0,Math.PI/2):(g=1,Math.PI/4),o(y|I)},this.reset=function(){Q.yaw=0,Q.pitch=0,Q.initialAlpha=Q.alpha,Q.initialOrientation=Q.orientation,o(I)},this.update=function(A){var e=function(A,e){if((A.naturalWidth||A.videoWidth||A.width)<=e)return A;var t=document.createElement("canvas");return t.width=e,t.height=e/2,t.getContext("2d").drawImage(A,0,0,t.width,t.height),t}(A,i);m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,e),o(1)},this.setDirection=function(A,e){Q.yaw=A,Q.pitch=e,o(I)},this.getDirection=function(){return[Q.yaw,Q.pitch]},this.project=function(A){A=x.fromValues(A[0],A[1],A[2],1),x.transformMat4(A,A,T);var e=.1<A[3],t=e?A[0]/A[3]:-10,n=e?A[1]/A[3]:0;return[t=(t+1)/2,n=(1-n)/2]},this.unproject=function(A,e){A=2*A-1,e=1-2*e;var t=M.create();M.invert(t,T);var n=P.fromValues(A,e,1);P.transformMat4(n,n,t);var a=P.fromValues(A,e,0);P.transformMat4(a,a,t),P.subtract(a,a,n);var i=P.squaredLength(a),o=2*P.dot(a,n),r=o*o-4*i*(P.squaredLength(n)-1),c=(-o-Math.sqrt(r))/(2*i);return P.scaleAndAdd(n,n,a,c),n}}function z(){function e(e,A,t){e.src=A,e.load(),$(e).one("canplay",function(){var A=!0;t&&s&&(A=!1),A&&e.play()})}function A(A){setTimeout(function(){A.src="",$(A).off()},0)}function t(){nA.device.mobile?i.pause():i.volume=.1}function n(){nA.device.mobile?s||i.play():i.volume=1}var a,i=$("<audio preload='auto'>")[0],o=$("<audio preload='auto'>")[0],r=$("<video playsinline>")[0],c={},l=!1,s=!1;Object.defineProperty(this,"muted",{get:function(){return s},set:function(A){(s=A)?i.pause():i.play()}}),this.load=function(){i.load(),o.load(),r.load(),l=!0,a&&this.playPrimaryAudio(a)};var u=$("<div>");this.on=u.on.bind(u),this.off=u.off.bind(u),this.emit=u.triggerHandler.bind(u),this.playPrimaryAudio=function(A){return l?(e(i,A,!0),void this.emit("play")):void(a=A)},this.stopPrimaryAudio=function(){A(i),this.emit("stop")},this.playSecondaryAudio=function(A){t(),e(o,A)},this.stopSecondaryAudio=function(){n(),A(o)},this.playVideo=function(A,e){t(),r.src=A,r.load(),$(r).one("canplaythrough",function(){r.play(),function A(){r.currentSrc&&(e.each(function(){this.width!=this.clientWidth&&(this.width=this.clientWidth),this.height!=this.clientHeight&&(this.height=this.clientHeight);var A=this.getContext("2d"),e=[r.videoWidth,r.videoHeight,this.width,this.height,!0];(e=nA.getDrawImageParams.apply(null,e)).unshift(r),A.drawImage.apply(A,e)}),setTimeout(A,40))}()})},this.stopVideo=function(){n(),A(r)},this.loadImage=function(e,A){var t=c[e];return t?$.Deferred().resolve(t):nA.loadImage(e,A).done(function(A){c[e]=A})},this.cleanImageCache=function(){c={}}}function J(t,A){function n(){c.empty(),a.image?function(){var A=$("<div>").appendTo(c),e=eA.getPictureUrl(a.image);A.css("background-image","url("+e+")")}():a.video?function(){var A=$("<canvas>").appendTo(c);t.media.playVideo(a.video,A)}():a.embed?function(){var A=$('<div class="tlIframeWrapper">').appendTo(c);A.on("touchstart",function(A){A.stopPropagation()}),$("<iframe>").appendTo(A).attr("src",a.embed)}():a.link&&function(){var A=$("<article>").appendTo(c);$("<a>").attr("href",a.link).attr("target","_blank").text(a.link).appendTo(A)}()}var a,i,e,o,r,c,l;e=$('<div class="tlPopupContainer">').appendTo(A),r=$('<div class="tlPopupWrapper">').appendTo(e),o=$('<div class="tlPopup">').appendTo(r),c=$('<div class="tlPopupContent">').appendTo(o),l=$('<div class="tlPopupOverlay">').appendTo(o),$('<div class="tlPopupClose hoverable">').appendTo(r).tap(function(){t.closeTag(a.id)}),this.load=function(A){this.data=A,i=a,a=function(A){return{id:A.id,image:A.picture,audio:A.audio,video:A.video,description:A.description,embed:A.isDirectEmbed?A.link:null,link:A.isDirectEmbed?null:A.link}}(A);var e=nA.propsChanged.bind(nA,a,i);e(["image","video","embed","link"])&&n(),e(["description"])&&function(){if(l.empty(),a.description){var A=$('<div class="tlPopupOverlayText">').appendTo(l),e=nA.markdownToHtml(a.description);A.html(e),A.on("touchstart",function(A){$(A.target).is("a")&&A.stopPropagation(),this.scrollHeight>this.clientHeight&&A.stopPropagation()})}}(),e(["audio","video","embed"])&&(a.audio||a.video||a.embed?t.media.playSecondaryAudio(a.audio):t.media.stopSecondaryAudio())},this.remove=function(){e.remove(),t.media.stopSecondaryAudio(),t.media.stopVideo()}}function q(i){var o,n;this.load=function(A,e){n=o,o=function(A){return{id:A.id,title:A.title,url:A.url,audio:A.audio,whitelabel:A.whitelabel,metadata:A.metadata}}(A);var t=nA.propsChanged.bind(nA,o,n);t(["id"])&&(nA.device.mobile||i.engine.reset()),t(["title"])&&function(){var A=o.title||"";0<=A.indexOf("My Interactive 360 Image")?A="":0<=A.indexOf("My Interactive Image")&&(A=""),i.sceneTitle.text(A)}(),t(["metadata"])&&function(A){var e=o.metadata||{},t=e.architectural||!1;i.engine.setArchitectural(t);var n=e.yaw||0,a=e.pitch||0;A&&i.engine.setDirection(n,a)}(e),t(["whitelabel","metadata"])&&function(){var A=o.metadata||{},e=!0;o.whitelabel?e=!1:!0===A.hidelogo&&(e=!1),i.sceneLogo.toggle(e),i.sceneLogo.off().click(function(){window.open(eA.getSceneUrl(o.id))})}(),t(["url"])&&i.media.loadImage(o.url,!0).then(function(A){i.engine.update(A)}),t(["audio"])&&(o.audio?i.media.playPrimaryAudio(o.audio):i.media.stopPrimaryAudio())}}function K(A,e,n){var t,a,i,o,r,c,l;function s(A){var e=encodeURI(n);A&&(e+="?autoplay=1");var t='<iframe src="{1}" width="640" height="400" frameborder="0" allowfullscreen mozallowfullscreen webkitallowfullscreen></iframe>'.replace("{1}",e);o.find("textarea").val(t)}A.find(".tlShareContainer").remove(),t=$('<div class="tlShareContainer">').appendTo(A),a=$('<div class="tlShare">').appendTo(t),$('<div class="tlShareHeader">').text("Share").appendTo(a),i=$('<div class="tlShareBody">').appendTo(a),c=encodeURIComponent(e),l=$('<div class="tlShareSection tlShareSocialSection">').appendTo(i),[["facebook","https://www.facebook.com/sharer/sharer.php?u="],["twitter","https://twitter.com/intent/tweet?url="],["gplus","https://plus.google.com/share?url="],["vk","https://vk.com/share.php?url="]].forEach(function(A){var e=A[0],t=A[1];$('<div class="tlShareSocialButton">').addClass(e).appendTo(l).tap(function(){return window.open(t+c,"_blank","width=600,height=400"),!1})}),r=$('<div class="tlShareSection">').appendTo(i),$('<input type="text">').val(e).appendTo(r),o=$('<div class="tlShareSection">').appendTo(i),$('<textarea rows="5">').appendTo(o),$('<label><input type="checkbox"> Autoplay</label>').appendTo(o),o.find(":checkbox").change(function(){s($(this).is(":checked"))}),s(!1),i.on("touchstart",function(A){$(A.target).is("input,textarea")&&A.stopPropagation()}),t.tap(function(){t.remove()}),a.on("click touchstart",function(A){A.stopPropagation()})}function AA(c,l){function A(){var A=d.position(),e=A.left/d.parent().width(),t=A.top/d.parent().height(),n=nA.pointToProjection(c.engine.unproject(e,t));c.trigger("tagmove",[s.id,n])}function t(){var A,e,t,n=l.width(),a=l.height(),i=c.engine.project(u),o=i[0]*n,r=i[1]*a;d.translate(o,r),c.splitScreen&&(A=o,e=r,t=d.hasClass("hover")?60:30,(nA.inCircle(A,e,n/2,a/2,t)?function(){p||(d.addClass("hover"),p=setTimeout(function(){c.openTag(s.id)},h))}:function(){p&&(d.removeClass("hover"),clearTimeout(p),p=void 0,c.closeTag(s.id))})())}var s,n,u,d,a,i,p,h=1e3;d=$('<div class="tlTag hoverable">').appendTo(l),a=$('<div class="tlTagIcon">').appendTo(d),i=$('<div class="tlTagTitle">').appendTo(d),d.tapdrag({tap:function(){c.openTag(s.id)},drag:A,enabled:c.editor}),this.transform=t,this.load=function(A){this.data=A,n=s,s=function(A){var e=A.link&&!A.isDirectEmbed;return{id:A.id,title:A.title,point:[A.point.x,A.point.y],icon:A.icon,nubbin:A.nubbin,follow:e}}(A);var e=nA.propsChanged.bind(nA,s,n);e(["point"])&&(u=nA.projectionToPoint.apply(null,s.point),t()),e(["title","icon","follow","nubbin"])&&function(){var A=eA.getIconUrl(s.icon);s.nubbin&&"transparent"!==s.nubbin&&(A=eA.getNubbinUrl(s.nubbin)),a.css("background-image",A?"url("+A+")":""),a.toggleClass("tlTagIconFollow",!A&&!!s.follow),i.toggle(!!s.title).text(s.title)}(),e(["id"])&&(n&&d.removeClass("tag-"+n.id),d.addClass("tag-"+s.id))},this.remove=function(){d.remove()}}function a(A){return(-1<A.indexOf("://")?A.split("/")[2]:A.split("/")[0]).split(":")[0].split("?")[0]}function A(A){var e=a(A),t=e.split("."),n=t.length;return 2<n&&(e="www"===t[0]?t.slice(1,n).join("."):t.slice(0,n).join(".")),e}function e(A){return-1===["thinglink.com","thinglink.me","","vr.thinglink.com","app.widgets.thinglink.com","widgets.thinglink.com","thinglink.local","sandbox.thinglink.com","guess.thinglink.com","video.thinglink.com","thingpic.com","tlsrv.net"].indexOf(A)}function t(A){var e=new Date(A),t=((new Date).getTime()-e.getTime())/864e5;return 30<Math.floor(t)}function n(A,e){var t=jQuery('<div id="tlGdprOverlay">').appendTo(A);t.append('<div class="text">');var n=t.find(".text"),a="<p>"+e+' contains embed content from <span class="contentLinks"></span>By choosing to play this <span>'+e+"</span> you accept that you will be subject to their respective Terms of Service.";n.append(a),n.append('<button class="gdpr-btn-accept">accept</button>'),n.append('<p class="tlTerms"><a href="https://thinglink.com/terms" target="_blank">Terms of service</a></p>')}function i(){var A=jQuery(this).data("id"),e={mediaId:A,domains:jQuery(this).data("domains"),timestamp:new Date};window.localStorage.setItem("tl-"+A,JSON.stringify(e)),jQuery("#tlGdprOverlay").remove()}window.NoSleep=function(t){function n(A){if(a[A])return a[A].exports;var e=a[A]={i:A,l:!1,exports:{}};return t[A].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var a={};return n.m=t,n.c=a,n.d=function(A,e,t){n.o(A,e)||Object.defineProperty(A,e,{configurable:!1,enumerable:!0,get:t})},n.n=function(A){var e=A&&A.__esModule?function(){return A.default}:function(){return A};return n.d(e,"a",e),e},n.o=function(A,e){return Object.prototype.hasOwnProperty.call(A,e)},n.p="",n(n.s=0)}([function(A,e,t){var n=function(){function n(A,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(A,n.key,n)}}return function(A,e,t){return e&&n(A.prototype,e),t&&n(A,t),A}}(),a=t(1),i="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,o=function(){function A(){(function(A,e){if(!(A instanceof e))throw new TypeError("Cannot call a class as a function")})(this,A),i?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",a),this.noSleepVideo.addEventListener("timeupdate",function(A){.5<this.noSleepVideo.currentTime&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return n(A,[{key:"enable",value:function(){i?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){i?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),A}();A.exports=o},function(A,e,t){A.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQAD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"}]);var o,r,eA=(o=c("","https://thinglink.local:8443/thinglink/"),r=c("","https://thinglink.local:8443/thinglink/"),{getNubbinUrl:function(A){return r+"/api/nubbin/"+A+"/plain"},getUrlById:function(A){return o+"/api/media/"+A},getSceneUrl:function(A){return o+"/media/"+A},getIconUrl:function(A){return l(A,180,180,"thumbnail")},getPictureUrl:function(A){return l(A,1280,1280,"scaledown")},getImageUrl:function(A,e,t,n){return r+"/api/image/"+A+"/"+e+"/"+t+"/"+n}}),P={};function c(A,e){return"@"==A.charAt(0)?e:A}function l(A,e,t,n){if(!A)return A;if(0<=A.indexOf("/api/image/"))return A;var a=encodeURIComponent(btoa(A));return r+"/api/image/"+(a+"/"+e+"/"+t+"/"+n)}P.fromValues=function(A,e,t){var n=new Float32Array(3);return n[0]=A,n[1]=e,n[2]=t,n},P.subtract=function(A,e,t){return A[0]=e[0]-t[0],A[1]=e[1]-t[1],A[2]=e[2]-t[2],A},P.dot=function(A,e){return A[0]*e[0]+A[1]*e[1]+A[2]*e[2]},P.squaredLength=function(A){var e=A[0],t=A[1],n=A[2];return e*e+t*t+n*n},P.scale=function(A,e,t){return A[0]=e[0]*t,A[1]=e[1]*t,A[2]=e[2]*t,A},P.scaleAndAdd=function(A,e,t,n){return A[0]=e[0]+t[0]*n,A[1]=e[1]+t[1]*n,A[2]=e[2]+t[2]*n,A},P.normalize=function(A,e){var t=e[0],n=e[1],a=e[2],i=t*t+n*n+a*a;return 0<i&&(i=1/Math.sqrt(i),A[0]=e[0]*i,A[1]=e[1]*i,A[2]=e[2]*i),A},P.transformMat4=function(A,e,t){var n=e[0],a=e[1],i=e[2],o=t[3]*n+t[7]*a+t[11]*i+t[15];return o=o||1,A[0]=(t[0]*n+t[4]*a+t[8]*i+t[12])/o,A[1]=(t[1]*n+t[5]*a+t[9]*i+t[13])/o,A[2]=(t[2]*n+t[6]*a+t[10]*i+t[14])/o,A};var x={fromValues:function(A,e,t,n){var a=new Float32Array(4);return a[0]=A,a[1]=e,a[2]=t,a[3]=n,a},transformMat4:function(A,e,t){var n=e[0],a=e[1],i=e[2],o=e[3];return A[0]=t[0]*n+t[4]*a+t[8]*i+t[12]*o,A[1]=t[1]*n+t[5]*a+t[9]*i+t[13]*o,A[2]=t[2]*n+t[6]*a+t[10]*i+t[14]*o,A[3]=t[3]*n+t[7]*a+t[11]*i+t[15]*o,A}},k={create:function(){var A=new Float32Array(4);return A[0]=0,A[1]=0,A[2]=0,A[3]=1,A},rotateX:function(A,e,t){t*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],r=Math.sin(t),c=Math.cos(t);return A[0]=n*c+o*r,A[1]=a*c+i*r,A[2]=i*c-a*r,A[3]=o*c-n*r,A},rotateY:function(A,e,t){t*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],r=Math.sin(t),c=Math.cos(t);return A[0]=n*c-i*r,A[1]=a*c+o*r,A[2]=i*c+n*r,A[3]=o*c-a*r,A},rotateZ:function(A,e,t){t*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],r=Math.sin(t),c=Math.cos(t);return A[0]=n*c+a*r,A[1]=a*c-n*r,A[2]=i*c+o*r,A[3]=o*c-i*r,A}},M={create:function(){var A=new Float32Array(16);return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A},fromRotationTranslation:function(A,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],r=n+n,c=a+a,l=i+i,s=n*r,u=n*c,d=n*l,p=a*c,h=a*l,g=i*l,f=o*r,m=o*c,v=o*l;return A[0]=1-(p+g),A[1]=u+v,A[2]=d-m,A[3]=0,A[4]=u-v,A[5]=1-(s+g),A[6]=h+f,A[7]=0,A[8]=d+m,A[9]=h-f,A[10]=1-(s+p),A[11]=0,A[12]=t[0],A[13]=t[1],A[14]=t[2],A[15]=1,A},invert:function(A,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=e[4],r=e[5],c=e[6],l=e[7],s=e[8],u=e[9],d=e[10],p=e[11],h=e[12],g=e[13],f=e[14],m=e[15],v=t*r-n*o,w=t*c-a*o,E=t*l-i*o,b=n*c-a*r,B=n*l-i*r,T=a*l-i*c,Q=s*g-u*h,C=s*f-d*h,y=s*m-p*h,I=u*f-d*g,D=u*m-p*g,R=d*m-p*f,G=v*R-w*D+E*I+b*y-B*C+T*Q;return G?(G=1/G,A[0]=(r*R-c*D+l*I)*G,A[1]=(a*D-n*R-i*I)*G,A[2]=(g*T-f*B+m*b)*G,A[3]=(d*B-u*T-p*b)*G,A[4]=(c*y-o*R-l*C)*G,A[5]=(t*R-a*y+i*C)*G,A[6]=(f*E-h*T-m*w)*G,A[7]=(s*T-d*E+p*w)*G,A[8]=(o*D-r*y+l*Q)*G,A[9]=(n*y-t*D-i*Q)*G,A[10]=(h*B-g*E+m*v)*G,A[11]=(u*E-s*B-p*v)*G,A[12]=(r*C-o*I-c*Q)*G,A[13]=(t*I-n*C+a*Q)*G,A[14]=(g*w-h*b-f*v)*G,A[15]=(s*b-u*w+d*v)*G,A):null},multiply:function(A,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],r=e[4],c=e[5],l=e[6],s=e[7],u=e[8],d=e[9],p=e[10],h=e[11],g=e[12],f=e[13],m=e[14],v=e[15],w=t[0],E=t[1],b=t[2],B=t[3];return A[0]=w*n+E*r+b*u+B*g,A[1]=w*a+E*c+b*d+B*f,A[2]=w*i+E*l+b*p+B*m,A[3]=w*o+E*s+b*h+B*v,w=t[4],E=t[5],b=t[6],B=t[7],A[4]=w*n+E*r+b*u+B*g,A[5]=w*a+E*c+b*d+B*f,A[6]=w*i+E*l+b*p+B*m,A[7]=w*o+E*s+b*h+B*v,w=t[8],E=t[9],b=t[10],B=t[11],A[8]=w*n+E*r+b*u+B*g,A[9]=w*a+E*c+b*d+B*f,A[10]=w*i+E*l+b*p+B*m,A[11]=w*o+E*s+b*h+B*v,w=t[12],E=t[13],b=t[14],B=t[15],A[12]=w*n+E*r+b*u+B*g,A[13]=w*a+E*c+b*d+B*f,A[14]=w*i+E*l+b*p+B*m,A[15]=w*o+E*s+b*h+B*v,A},perspective:function(A,e,t,n,a){var i=1/Math.tan(e/2),o=1/(n-a);return A[0]=i/t,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=i,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=(a+n)*o,A[11]=-1,A[12]=0,A[13]=0,A[14]=2*a*n*o,A[15]=0,A}};window.Player=function(A,a){function e(){C=new z;var A=!a.autoplay;nA.device.mobile&&!nA.device.app&&(A=!0),g=!A||function(){var A=$.Deferred(),e=$('<div class="tlPlayButton">').appendTo(f);return e.touch(function(){e.remove(),A.resolve()}),A.promise()}(),f.addClass("tlPlayButtonActive"),$.when(g).done(function(){C.load(),f.removeClass("tlPlayButtonActive")}),C.on("play stop",function(A){v.find(".tlMuteButton").toggle("play"==A.type)})}function t(){Y=!1,U&&(Y=90==Math.abs(window.orientation||0)),f.toggleClass("tlSplitScreen",Y),Q.setSplitScreen(Y),Y?m.eq(1).insertAfter(m.eq(0)):m.eq(1).detach()}function n(A){void 0===A&&(A=!U),U=A,R&&(A?R.enable():R.disable()),E.toggle(U),t()}function i(A){return $.getJSON(A).then(function(A){return A=A.results,nA.device.mobile?A.url=eA.getImageUrl(A.id,4096,10,"scaletowidth"):A.url=eA.getImageUrl(A.id,16,16,"none"),function(A){V.createGdprOverlay(f,"Video"),L=[];var e=A.id,t=!1;void 0!==A.gdpr&&A.gdpr,A.gdpr&&(t=!0),A.tags.forEach(function(A){var e="";void 0!==A.link&&null!==A.link&&(e=V.extractRootDomain(A.link)),V.isExternalDomain(e)&&0!==e.length&&-1===L.indexOf(e)&&A.isDirectEmbed&&L.push(e)}),L.sort(),L.forEach(function(A,e){var t='<a href="https://www.'+A+'" target="_blank">'+A+"</a>";t+=e<L.length-1?", ":". ",$(".contentLinks").append(t)});var n=!1,a=JSON.parse(window.localStorage.getItem("tl-"+e));if(a&&0!==a.length){for(var i=a.domains,o=0;o<i.length;o++)if(L[o]!==i[o]){n=!0;break}n=V.isExceededTime(a.timestamp)}else n=!0;0==L.length&&(n=!1),t&&n&&($("#tlGdprOverlay").css({display:"block"}),$(".gdpr-btn-accept").data("id",e),$(".gdpr-btn-accept").data("domains",L),$(".gdpr-btn-accept").bind("click",V.acceptGDPR))}(A),A})}function o(A){var e=function(A){var e=A.url;return C.loadImage(e,!0).then(function(){return A})}(A),t=function(A){var e,t=$.Deferred();return(e=A.tags.map(function(A){var e=A.icon;if(e){var t=$.Deferred();return nA.loadImage(e).always(t.resolve),t.promise()}}),$.when.apply($,e)).then(t.resolve),setTimeout(t.resolve,N),t.then(function(){return A})}(A);return $.when(e,t).then(function(){return A})}function r(A){return A.tags.forEach(function(A){var e=A.picture;e&&nA.loadImage(e)}),A}function c(){Z=!1;var A=$.Deferred(),e=1==b.css("opacity");return setTimeout(A.resolve,e?0:H),b.addClass("in"),A.promise().then(function(){clearTimeout(j),j=setTimeout(function(){b.addClass("loading")},H)})}function l(A){I.load(y,A);var t=[];for(var e in y.tags.forEach(function(A){var e=A.id;W[e]||(W[e]=new AA(p,m)),W[e].load(A),t.push(e)}),W)t.indexOf(e)<0&&(W[e].remove(),delete W[e]);D&&(D.remove(),D=void 0,f.removeClass("tlPopupActive"))}function s(A){$('<div class="tlErrorMessage">').appendTo(f).text(tA(A))}function u(A,e){y=A,p.metadata=y,l(e),p.trigger("loadscene",[A.id])}var d,p=this,h={autoplay:(d=nA.getQueryParams(location.search),"1"===d.autoplay||"fb"===d.on),displayShare:!1,editor:!1,displayTitle:!0,displayPanel:!0};a.editor&&(void 0===a.autoplay&&(a.autoplay=!0),void 0===a.displayShare&&(a.displayShare=!0)),a=$.extend({},h,a);var g,f,m,v,w,E,b,B,T,Q,C,y,I,D,R,G,S,P,x,k,M,F,N=5e3,H=1e3,Z=!1,U=!1,Y=!1,W={},L=[],V=aA,X=nA.getQueryParams(location.search);nA.device.ios&&(R=new NoSleep),(f=$('<div class="tlPlayer">').appendTo(A)).hoverable(),nA.supports.webgl?(M={callback:function(A,e){for(var t in w&&w.find(".tlCompassNeedle").css("transform","rotateZ("+A+"rad)"),W)W[t].transform()},enableTouch:!0,enableGyroscope:nA.device.mobile&&nA.isTopWindow,autoRotate:"1"===X.autorotate},F=$("<canvas>").appendTo(f),Q=new _(F[0],M),$(window).resize(function(){Q.resize(),setTimeout(Q.resize.bind(Q),200)}),$('<div class="tlViewport tlViewportLeft">').appendTo(f),$('<div class="tlViewport tlViewportRight">').appendTo(f),m=f.find(".tlViewport"),(w=$('<div class="tlCompass">').appendTo(m)).append('<div class="tlCompassNeedle">'),w.tap(function(){Q.reset()}),v=$('<div class="tlControls">').appendTo(f),E=$('<div class="tlOverlay">').appendTo(f),b=$('<div class="tlFader in">').appendTo(f),c(),B=$('<div class="tlSceneTitle">').appendTo(f),p.sceneTitle=B,T=$('<div class="tlSceneLogo">').appendTo(f),p.sceneLogo=T,"0"!==X.displaytitle&&a.displayTitle||p.sceneTitle.detach(),n(!1),$(window).on("orientationchange",t),G=$('<div class="tlControlPanel">').appendTo(v),S=$('<div class="tlMuteButton hoverable">').appendTo(G),P=$('<div class="tlShareButton hoverable">').appendTo(G),x=$('<div class="tlFullScreenButton hoverable">').appendTo(G),k=$('<div class="tlSplitScreenButton hoverable">').appendTo(G),S.hide(),a.displayShare||P.hide(),x.toggle(!nA.device.mobile),k.toggle(nA.device.mobile&&!nA.device.tablet),a.displayPanel||(P.hide(),x.hide(),k.hide()),S.tap(function(){C.muted=!C.muted,S.toggleClass("muted",C.muted)}),P.tap(function(){K(f,y.pageUrl,y.embedUrl)}),x.tap(function(){f.toggleFullscreen()}),k.tap(function(){return nA.isTopWindow?(n(!0),void f.toggleFullscreen(!0)):void window.open(window.location.href,"_blank")}),E.touch(function(){n(!1),f.toggleFullscreen(!1)}),f.on("tagmove",function(A,e,t){var n=p.getTag(e);n.point={x:t[0],y:t[1]},p.setTag(e,n)}),$(window).on("message",function(A){"openShare"==A.originalEvent.data&&K(f,y.pageUrl,y.embedUrl)}),e(),p.on=f.on.bind(f),p.one=f.one.bind(f),p.off=f.off.bind(f),p.trigger=f.triggerHandler.bind(f),p.engine=Q,p.media=C,nA.defineGetter(p,"splitScreen",function(){return Y}),nA.defineGetter(p,"editor",function(){return a.editor}),I=new q(p),nA.device.mobile&&f.on("touchstart",!1)):s("not_supported"),function(){var A=nA.getQueryParams(location.search).style;if(A&&/^[0-9a-f]{32}$/.test(A)){var e="https://s3.amazonaws.com/thinglink-customer/css/"+A+".css";$("<link>").attr({rel:"stylesheet",href:e}).appendTo("head")}}();var j,O=0;this.load=function(A){var e=0===O,t=++O,n=(V.extractRootDomain(A),i(A+"/?scopes=permissions").then(o).then(r));$.when(n,c()).done(function(A){t==O&&(u(A,!0),Z=!0,clearTimeout(j),b.removeClass("loading"),b.removeClass("in"))}).fail(function(){s("load_failed")}),e&&!a.editor&&$.getJSON(A+"/transitions").done(function(A){!function(A){if("0"!==X.rel&&!(A.length<2)){var e=$('<div class="tlRelatedScenes">').appendTo(f),a=$('<div class="tlRelatedScenesContainer">').appendTo(e);$('<div class="tlRelatedScenesToggle hoverable">').appendTo(e).tap(function(){e.toggleClass("hidden")}),A.forEach(function(A){var e=$('<div class="tlRelatedScene hoverable">').appendTo(a),t=eA.getImageUrl(A.id,640,10,"scaledown");$('<div class="tlRelatedSceneImage">').css({backgroundImage:"url("+t+")"}).appendTo(e),$('<div class="tlRelatedSceneTitle">').text(A.title).appendTo(e);var n=eA.getUrlById(A.id);e.tap(function(){p.load(n)})})}}(A.results)})},this.reload=function(A){i(A).then(function(A){u(A)})},this.update=function(){l()},this.getTag=function(A){return W[A]?W[A].data:null},this.openTag=function(A){if(Z){p.trigger("opentag",[A]);var e=this.getTag(A);return!e.link||e.isDirectEmbed||p.editor?void(D||((D=new J(p,m)).load(e),f.addClass("tlPopupActive"))):(function(A){var e=/\/(?:media|video)(?:card)?\/(\d+)$/;e.exec(A)?(A=function(A){var e=/^https?:\/\/thinglink.com\/(.*)/;return e.exec(A)&&(A=A.replace(e,"https://www.thinglink.com/$1")),A}(A=A.replace(e,"/api/media/$1")),p.load(A)):window.open(A,"_blank")}(e.link),void p.trigger("closetag",[A]))}},this.closeTag=function(A){Z&&(p.trigger("closetag",[A]),D&&(D.remove(),D=void 0,f.removeClass("tlPopupActive")))},this.setTag=function(A,e){if(!e){(e={}).id=A,e.videoid=y.id;var t=nA.pointToProjection(Q.unproject(.5,.5));e.point={x:t[0],y:t[1]}}W[A]||(W[A]=new AA(p,m)),W[A].load(e),D&&D.load(e)}},$.fn.translate=function(A,e){return this.css("transform","translate3d("+A.toFixed(2)+"px,"+e.toFixed(2)+"px,0)")},$.fn.hoverable=function(A,n){return A=A||".hoverable",n=n||"hover",this.on("mouseenter mouseleave",A,function(A){$(this).toggleClass(n,"mouseenter"==A.type)}),this.on("touchstart",A,function(e){e.preventDefault();var t=$(this);t.addClass(n),$(document).on("touchend touchcancel",function A(){e.preventDefault(),t.removeClass(n),$(document).off("touchend touchcancel",A)})}),this},$.fn.draggable=function(e){return(e=e||{}).callback=e.callback||$.noop,this.on("mousedown",function(A){var n=$(A.delegateTarget),a=n.parent().offset(),i=!1;$(document).one("mousemove.draggable",function(A){n.data("dragging",!0)}),$(document).on("mousemove.draggable",function(A){var e=A.pageX-a.left,t=A.pageY-a.top;n.translate(e,t),i=!0}),$(document).on("mouseup.draggable",function(A){$(document).off(".draggable"),setTimeout(function(){n.data("dragging",!1)},0),i&&e.callback()})}),this},$.fn.touch=function(e){return this.on("touchstart click",function(A){A.preventDefault(),e(A)}),this},$.fn.tap=function(a){return this.on("click",function(A){A.preventDefault(),a(A)}),this.on("touchstart",function(A){A.preventDefault();var n=A.delegateTarget;$(document).one("touchend",function(A){A.preventDefault();var e=A.originalEvent.changedTouches[0],t=document.elementFromPoint(e.pageX,e.pageY);$(t).closest(n).length&&a(A)})}),this},$.fn.tapdrag=function(t){if(!(t=$.extend({tap:$.noop,drag:$.noop,enabled:!1},t)).enabled)return this.tap(t.tap),this;this.on("touchstart mousedown",function(A){A.preventDefault();var c=$(A.delegateTarget),e=A.originalEvent.changedTouches?A.originalEvent.changedTouches[0]:A,l=e.pageX,s=e.pageY,u=c.parent().offset(),d=!1;$(document).on("touchmove.draggable mousemove.draggable",function(A){A.preventDefault();var e=A.originalEvent.changedTouches?A.originalEvent.changedTouches[0]:A,t=e.pageX,n=e.pageY,a=t-l,i=n-s;if(!d&&100<a*a+i*i&&(d=!0),d){var o=t-u.left,r=n-u.top;c.translate(o,r)}}),$(document).on("touchend.draggable mouseup.draggable",function(A){A.preventDefault(),$(document).off(".draggable"),d?t.drag():t.tap()})})},$.fn.toggleFullscreen=function(A){if(void 0===A){A=!["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].some(function(A){return document[A]})}if(A){var e=this[0];e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()};var s,u,tA=(u={not_supported:"360Â° media is not supported on this browser",load_failed:"Error loading media"},function(A){return u[A]}),nA={device:{ios:/iPod|iPhone|iPad/.test(navigator.userAgent),android:/Android/.test(navigator.userAgent),mobile:/iPod|iPhone|iPad|Android/.test(navigator.userAgent),tablet:768<=Math.min(screen.width,screen.height),iphone:/iPod|iPhone/.test(navigator.userAgent),winphone:/Windows Phone|IEMobile/.test(navigator.userAgent),app:/ThingLink/.test(navigator.userAgent)},supports:{webgl:(s=document.createElement("canvas"),!(!s.getContext("webgl")&&!s.getContext("experimental-webgl")))},isTopWindow:function(){try{return window.self===window.top}catch(A){return!1}}(),projectionToPoint:function(A,e){var t=2*A*Math.PI,n=(.5-e)*Math.PI;return[Math.cos(t)*Math.cos(n),Math.sin(n),Math.sin(t)*Math.cos(n)]},pointToProjection:function(A){var e=Math.atan2(A[2],A[0]),t=Math.asin(A[1]);return e<0&&(e=2*Math.PI+e),[e/(2*Math.PI),.5-t/Math.PI]},inCircle:function(A,e,t,n,a){var i=A-t,o=e-n;return i*i+o*o<a*a},loadImage:function(A,e){var t=$.Deferred(),n=new Image;return n.onload=t.resolve.bind(t,n),n.onerror=t.reject.bind(t,n),n.crossOrigin=e?"anonymous":void 0,n.src=A,t.promise()},getDrawImageParams:function(A,e,t,n,a){var i=A/e,o=t/n,r=0,c=0,l=t,s=n,u=0,d=0,p=A,h=e;return a?o<i?u=(A-(p=e*o))/2:d=(e-(h=A/o))/2:o<i?c=(n-(s=t/i))/2:r=(t-(l=n*i))/2,[u,d,p,h,r,c,l,s]},preventIdle:function(){setInterval(function(){location.href=location.href,window.setTimeout(window.stop,0)},3e4)},defineGetter:function(A,e,t){Object.defineProperty(A,e,{get:t})},deepEqual:function(A,e){if(A===e)return!0;if(!(A instanceof Object&&e instanceof Object))return!1;var t=Object.keys(A).sort(),n=Object.keys(e).sort();if(t.length!=n.length)return!1;for(var a=0;a<t.length;a++){var i=t[a];if(i!==n[a])return!1;if(!nA.deepEqual(A[i],e[i]))return!1}return!0},propsChanged:function(e,t,A){return!t||A.some(function(A){return!nA.deepEqual(e[A],t[A])})},escapeHtml:function(A){var e=document.createElement("div");return e.textContent=A,e.innerHTML},markdownToHtml:function(A){return(A=(A=nA.escapeHtml(A)).replace(/(\*{1,3})([^\*\n]+)\1/g,function(A,e,t){return 1==e.length?"<em>"+t+"</em>":2==e.length?"<strong>"+t+"</strong>":"<em><strong>"+t+"</strong></em>"})).replace(/\[([^\]]+)\]\(([^\)]+)\)/g,function(A,e,t){return'<a href="'+t+'" target="_blank">'+e+"</a>"})},getQueryParams:function(A){if(!(A=A.trim().substr(1)))return{};var t={};return A.split("&").forEach(function(A){var e=A.split("=");t[e[0]]=e[1]}),t}},aA={extractHostname:a,extractRootDomain:A,isExternalDomain:e,isExceededTime:t,createGdprOverlay:n,acceptGDPR:i};window.tlRequire&&tlRequire.define("gdprUtils",[],function(){return{extractHostname:a,extractRootDomain:A,isExternalDomain:e,isExceededTime:t,createGdprOverlay:n,acceptGDPR:i}})}();